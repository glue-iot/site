(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{151:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6),e("p",[t._v("Например, это позволяет передавать между скриптами функции или таблицы, которые нельзя напрямую передать через BUS.")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),e("p",[t._v("Функция принимает на вход таблицу ключ-значение, ключами в которой являются имена параметров, а значениями — значения параметров.")]),t._v(" "),e("p",[t._v("Названия доступных параметров:")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),e("p",[t._v("Получает содержимое центральной шины (bus) в виде вложенной таблицы."),e("br"),t._v("\nИспользование: "),e("code",[t._v("local table = bus_serialize(pattern)")]),e("br"),t._v('\nВозвращает таблицу. Если передана переменная "pattern", то будет выбрана только часть таблицы, соответствующая заданному шаблону. Шаблоны соответствуют правилам '),e("a",{attrs:{href:"https://www.lua.org/pil/20.2.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lua patterns"),e("OutboundLink")],1)]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),e("p",[t._v("Примеры использования:")]),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),e("p",[t._v("Пример использования:")]),t._v(" "),t._m(28),t._m(29),t._v(" "),e("p",[t._v("Для использования этих библиотек не нужно делать require, они уже есть в области видимости каждого скрипта.")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),e("p",[e("a",{attrs:{href:"https://www.tarantool.io/en/doc/1.10/reference/reference_lua/http/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Документация"),e("OutboundLink")],1)]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),e("p",[e("a",{attrs:{href:"https://github.com/tarantool/mqtt",target:"_blank",rel:"noopener noreferrer"}},[t._v("Документация"),e("OutboundLink")],1)]),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),e("p",[e("a",{attrs:{href:"https://www.tarantool.io/en/doc/1.10/reference/reference_lua/json/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Документация"),e("OutboundLink")],1)]),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),e("p",[e("a",{attrs:{href:"https://www.tarantool.io/en/doc/1.10/reference/reference_lua/socket/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Документация"),e("OutboundLink")],1)]),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),e("p",[e("a",{attrs:{href:"https://www.tarantool.io/en/doc/1.10/reference/reference_lua/clock/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Документация"),e("OutboundLink")],1)]),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),e("p",[e("a",{attrs:{href:"https://www.tarantool.io/en/doc/1.10/reference/reference_lua/fiber/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Документация"),e("OutboundLink")],1)]),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),e("p",[t._v('Драйвера — это скрипты на Lua, которые реализуют тот или иной протокол(часто с привлечением сторонних библиотек) для связи с устройством, конвертируя данные приходящие с каждого устройства в единый формат. Они работают в качестве транслятора между "языком" устройства и общей шиной.')]),t._v(" "),e("p",[t._v("Рассмотрим драйверы подробнее на примере шаблона драйвера, который подставляется при его создании:")]),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),t._m(53),t._v(" "),t._m(54),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._m(61),t._v(" "),t._m(62),t._m(63),t._v(" "),t._m(64),t._m(65),t._v(" "),e("p",[e("router-link",{attrs:{to:"./examples_driver.html"}},[t._v("Примеры драйверов")])],1),t._v(" "),t._m(66),t._v(" "),t._m(67),t._v(" "),e("p",[t._v("Маски должны описываться в виде "),e("a",{attrs:{href:"http://lua-users.org/wiki/PatternsTutorial",target:"_blank",rel:"noopener noreferrer"}},[t._v("lua patterns"),e("OutboundLink")],1),t._v(", но с условием — паттерн должен соотвествовать всей строке, а не только его части.")]),t._v(" "),e("p",[t._v('Т.е. маска "/test/" будет соотвествовать только топику "/test/", но не "/test/value". Для соотвествия множеству топиков надо указать измеряемую часть специально: "/test/.+". В таком виде маска будет соотвествовать топикам "/test/value", "/test/value/exp" и всем другим, начинающимся на "/test/".')]),t._v(" "),t._m(68),t._v(" "),t._m(69),t._m(70),t._v(" "),t._m(71),t._v(" "),e("p",[e("router-link",{attrs:{to:"./examples_bus_event.html"}},[t._v("Примеры bus-event скриптов")])],1),t._v(" "),t._m(72),t._v(" "),e("p",[t._v('Скрипты, выполняемые при обращении к выбранному URL ("endpoint") с помощью HTTP запроса.')]),t._v(" "),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),t._m(76),t._v(" "),e("p",[t._v("В скриптах доступны переменные, содержащие данные запроса:")]),t._v(" "),e("ul",[t._m(77),t._v(" "),e("li",[e("code",[t._v("req")]),t._v(" - объект запроса "),e("a",{attrs:{href:"https://github.com/tarantool/http",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP сервера Tarantool"),e("OutboundLink")],1)])]),t._v(" "),t._m(78),e("p",[t._v("Если в функции "),e("code",[t._v("http_callback()")]),t._v(" вернуть одно значение-таблицу (напр. "),e("code",[t._v("return table")]),t._v("), то она будет сериализована в JSON и в таком виде отдана клиенту http-сервера."),e("br"),t._v("\nЕсли необходимо управлять возвращаемыми данными напрямую, то надо вернуть 2 значения (напр. "),e("code",[t._v("return nil, 'OK'")]),t._v('), тогда первое значение будет отброшено, а второе - выдано клиенту в "сыром" виде без сериализации.'),e("br"),t._v("\nДля дополнительных сведений смотрите документацию "),e("a",{attrs:{href:"https://github.com/tarantool/http",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP сервера Tarantool"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("router-link",{attrs:{to:"./examples_web_event.html"}},[t._v("Примеры web-event скриптов")])],1),t._v(" "),t._m(79),t._v(" "),e("p",[t._v("Скрипты, выполняемые с определенным интервалом (указывается в секундах).")]),t._v(" "),t._m(80),t._v(" "),e("p",[t._v("Для создания скрипта, укажите его название и желаемый интервал его выполнения в секундах.")]),t._v(" "),t._m(81),t._v(" "),t._m(82),e("p",[e("router-link",{attrs:{to:"./examples_timer_event.html"}},[t._v("Примеры timer-event скриптов")])],1),t._v(" "),t._m(83),t._v(" "),e("p",[t._v("Скрипты, выполняемые по заданному расписанию.")]),t._v(" "),t._m(84),t._v(" "),e("p",[t._v("Для создания скрипта, укажите его название и расписание в формате "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Cron",target:"_blank",rel:"noopener noreferrer"}},[t._v("crontab"),e("OutboundLink")],1),t._v("."),e("br"),t._v('\nФормат отличается от стандартного необходимостью указания секунд в интервале (первый символ). Если вам не нужны секунды, укажите в первом символе "0". Не указываете там "*", иначе скрипт будет запускаться каждую секунду в подходящих интервалах.')]),t._v(" "),t._m(85),e("p",[t._v("К примеру, с такими настройками расписания, скрипт будет запускаться по четвергам в 13:45:15")]),t._v(" "),t._m(86),t._m(87),t._v(" "),t._m(88),e("p",[e("router-link",{attrs:{to:"./examples_shedule_event.html"}},[t._v("Примеры shedule-event скриптов")])],1)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"документация-разработчика"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#документация-разработчика","aria-hidden":"true"}},[this._v("#")]),this._v(" Документация разработчика")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"общая-информация"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#общая-информация","aria-hidden":"true"}},[this._v("#")]),this._v(" Общая информация")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"внутренние-переменные-скрипта"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#внутренние-переменные-скрипта","aria-hidden":"true"}},[this._v("#")]),this._v(" Внутренние переменные скрипта")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[e("code",[t._v("_script_name")]),t._v(" - переменная, содержащая название текущего скрипта"),e("br"),t._v(" "),e("code",[t._v("_script_uuid")]),t._v(" -  переменная, содержащая uuid (уникальный идентификатор) текущего скрипта"),e("br"),t._v(" "),e("code",[t._v("store")]),t._v(" - таблица для хранения временных данных, уникальная для каждого скрипта. Ее можно использовать просто как переменную:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 5")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("main_store")]),this._v(" - таблица, в которой находятся хранилища всех запущенных с момента запуска системы скриптов."),s("br"),this._v('\nПервый уровень таблицы — UUID скриптов. Второй уровень — store каждого скрипта. UUID скрипта можно узнать, нажав на значок "i" в интерфейсе. С помощью этой таблицы можно получать доступ к хранилищам других скриптов:')])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main_store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8d72fe2f-801e-48d1-ac1a-526f3e2622c0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- { 1, 2, 3, 4, 5 }")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"функции-дnя-работы-с-nогами"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функции-дnя-работы-с-nогами","aria-hidden":"true"}},[this._v("#")]),this._v(" Функции для работы с логами")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"функции-log-info-log-warning-log-error-log-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функции-log-info-log-warning-log-error-log-user","aria-hidden":"true"}},[this._v("#")]),this._v(" Функции log_info(), log_warning(), log_error(), log_user()")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v('Добавляют в системный лог запись уровня "INFO", "WARNING", "ERROR" и "USER" соответственно.'),e("br"),t._v("\nИспользование: "),e("code",[t._v('log_info("Found correlation!")')]),t._v(", "),e("code",[t._v('log_warning("Found correlation!")')]),t._v(" , "),e("code",[t._v('log_error("Found correlation!")')]),t._v(" , "),e("code",[t._v('log_user("Found correlation!")')]),e("br"),t._v("\nНичего не возвращает.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"функции-log-и-print"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функции-log-и-print","aria-hidden":"true"}},[this._v("#")]),this._v(" Функции log() и print()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("log()")]),this._v(" - алиас для функции log_user()"),s("br"),this._v(" "),s("code",[this._v("print()")]),this._v(" - алиас для функции log_user()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"функции-дnя-работы-с-центраnьной-шиной"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функции-дnя-работы-с-центраnьной-шиной","aria-hidden":"true"}},[this._v("#")]),this._v(" Функции для работы с центральной шиной")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"функция-update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функция-update","aria-hidden":"true"}},[this._v("#")]),this._v(" Функция update()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция "),s("code",[this._v("update()")]),this._v(" предназаначена для создания и обновления топиков на шине.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[e("strong",[t._v("topic")]),t._v(": имя топика, строка")]),t._v(" "),e("li",[e("strong",[t._v("value")]),t._v(": значение топика, строка или число(преобразуется в строку)")]),t._v(" "),e("li",[e("strong",[t._v("type")]),t._v(": тип топика, строка")]),t._v(" "),e("li",[e("strong",[t._v("tags")]),t._v(": теги топика(таблица lua)")]),t._v(" "),e("li",[e("strong",[t._v("shadow")]),t._v(': признак "тихого" обновления, true или false')]),t._v(" "),e("li",[e("strong",[t._v("check")]),t._v(": признак проверки перед обновлением, true или false")]),t._v(" "),e("li",[e("strong",[t._v("time")]),t._v(": время обновления, если оно отличается от текущего, число, микросекунды")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Обязателен только параметр "),s("strong",[this._v("topic")]),this._v(". При передаче таблицы только с параметром topic будет обновлено время обновления соответствующего топика.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция возвращает "),s("code",[this._v("true")]),this._v(" или "),s("code",[this._v("false")]),this._v(", и в случае "),s("code",[this._v("false")]),this._v(", вторым аргументом - описание ошибки.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Данные, поступающие из драйверов или скриптов, могут обновлять значение топика в стандартном (standard) или теневом (shadow) режиме\nВ первом случае, отработают все скрипты, которые подписаны на изменения значения топика, во втором случае, значение будет изменено без запуска скриптов.\nПри обновлении самим скриптом топика, на который он подписан, коллбек в скрипте вызываться не будет."),s("br"),this._v("\nЕсли "),s("code",[this._v("shadow = true")]),this._v(", скрипты, подписанные на изменение, запущены не будут.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Если "),s("code",[this._v("check = true")]),this._v(", время в bus обновится только если новое значение топика не будет совпадать со старым(все приводится к строке). Скрипты тоже не будут запущены, если значение не изменилось.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Пример использования функции "),s("code",[this._v("update()")]),this._v(":"),s("br"),this._v(" "),s("code",[this._v('local result, err = update{topic = "/test/", value = 40, type = "test_type", tags = {"test", "test2"}}')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"функция-bus-serialize"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функция-bus-serialize","aria-hidden":"true"}},[this._v("#")]),this._v(" Функция bus_serialize()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"вспомогатеnьные-функции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#вспомогатеnьные-функции","aria-hidden":"true"}},[this._v("#")]),this._v(" Вспомогательные функции")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"функция-round"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функция-round","aria-hidden":"true"}},[this._v("#")]),this._v(" Функция round()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v('Функция для "правильного" математического округления с произвольной точностью.'),s("br"),this._v("\nПолучает число и количество знаков после запятой, возвращает округленное число. Если количество знаков не указано, используется 2."),s("br"),this._v("\nИспользование: "),s("code",[this._v("local round_value = round(value, rounds)")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" value "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.1415926535")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--\x3e 3.14")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--\x3e 3.14")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--\x3e 3.142")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"функция-deepcopy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#функция-deepcopy","aria-hidden":"true"}},[this._v("#")]),this._v(" Функция deepcopy()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция для копирования таблиц lua(если попытаться скопировать таблицу "),s("code",[this._v("table_a = table_b")]),this._v(", мы получим две ссылки на одну и ту же таблицу)."),s("br"),this._v("\nПолучает таблицу, возвращает копию таблицу. Таблица не должна быть рекурсивной, иначе функция переполнит стек."),s("br"),this._v("\nИспользование: "),s("code",[this._v("local copy_table = deepcopy(table)")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" old_table "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" copy_table "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("deepcopy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("old_table"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"встроенные-бибnиотеки"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#встроенные-бибnиотеки","aria-hidden":"true"}},[this._v("#")]),this._v(" Встроенные библиотеки")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"бибnиотека-http-client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#бибnиотека-http-client","aria-hidden":"true"}},[this._v("#")]),this._v(" Библиотека HTTP Client")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("Библиотека, реализующая примитивы для http-запросов."),e("br"),t._v("\nУже созданный экземпляр доступен через объект "),e("code",[t._v("http_client")]),t._v(", т.е. для метода "),e("code",[t._v("request()")]),t._v(" нужно вызвать "),e("code",[t._v("http_client.request()")]),e("br"),t._v("\nПример использования:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" r "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http_client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://google.com'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"бибnиотека-mqtt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#бибnиотека-mqtt","aria-hidden":"true"}},[this._v("#")]),this._v(" Библиотека MQTT")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Библиотека, реализующая клиента протокола MQTT. Доступна через объект "),s("code",[this._v("mqtt")]),s("br"),this._v("\nПример использования:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" mqtt_object "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mqtt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"client_id"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmqtt_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" host"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1883")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nok"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mqtt_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my/topic/#'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nok"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mqtt_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("publish")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my/topic/#'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Some payload as string'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mqtt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("QOS_0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mqtt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RETAIN"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"бибnиотека-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#бибnиотека-json","aria-hidden":"true"}},[this._v("#")]),this._v(" Библиотека JSON")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Библиотека, конвертирующая таблицы lua в json и обратно. Доступна через объект "),s("code",[this._v("json")]),s("br"),this._v("\nПример использования:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[t._v("json"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("encode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("abc "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("234")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cde "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("345")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('--\x3e \'{"cde":345,"abc":234}\'')]),t._v("\njson"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("decode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[123, \"hello\"]'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--\x3e [123, 'hello']")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"бибnиотека-socket"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#бибnиотека-socket","aria-hidden":"true"}},[this._v("#")]),this._v(" Библиотека Socket")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Библиотека для доступа к системным сокетам. Доступна через объект "),s("code",[this._v("socket")]),s("br"),this._v("\nПример использования:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" sock_1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("socket")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AF_INET'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SOCK_DGRAM'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'udp'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" sock_2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("socket")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AF_INET'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SOCK_DGRAM'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'udp'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsock_1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsock_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendto")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sock_1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmessage "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sock_1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("recvfrom")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--\x3e X")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"бибnиотека-clock"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#бибnиотека-clock","aria-hidden":"true"}},[this._v("#")]),this._v(" Библиотека Clock")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Библиотека для получения текущего времени. Доступна через объект "),s("code",[this._v("clock")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" current_time_s "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" clock"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- = clock.time64()/1000/1000/1000")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" current_time_ms "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" clock"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- = clock.time64()/1000/1000")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" current_time_ns "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" clock"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("time64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"бибnиотека-fiber"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#бибnиотека-fiber","aria-hidden":"true"}},[this._v("#")]),this._v(" Библиотека Fiber")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("Библиотека для работы с потоками. Доступна через объект "),e("code",[t._v("fiber")]),e("br"),t._v("\nНе стоит подключать библиотеку fiber вручную, т.е. делать \"local fiber = require 'fiber'\"."),e("br"),t._v("\nВ этом случае, ошибки внутри тредов fiber не попадут в лог конкретного скрипта и не сгенерируют ошибку, что усложняет отладку."),e("br"),t._v("\nВ библиотеке доступны методы "),e("code",[t._v("fiber.sleep()")]),t._v(", "),e("code",[t._v("fiber.create()")]),t._v(", "),e("code",[t._v("fiber.kill()")]),t._v(", "),e("code",[t._v("fiber.yield()")]),t._v(", "),e("code",[t._v("fiber.self()")]),t._v(", "),e("code",[t._v("fiber.status()")]),t._v(". Для остальных нужно делать require и оборачивать функции, которые запускаются через "),e("code",[t._v("fiber.create()")]),t._v(" в "),e("code",[t._v("pcall()")]),t._v("/"),e("code",[t._v("xpcall()")]),t._v("."),e("br"),t._v("\nПример использования:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tick"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      fiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--seconds")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\nfiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"скрипты-и-драйвера"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#скрипты-и-драйвера","aria-hidden":"true"}},[this._v("#")]),this._v(" Скрипты и драйвера")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"drivers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#drivers","aria-hidden":"true"}},[this._v("#")]),this._v(" Drivers")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[t._v("masks "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/test/1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/test/2"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test driver loop"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      fiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fiber_object "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fiber_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dead"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n      store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fiber_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("topic_update_callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test driver callback:"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция "),s("code",[this._v("init()")]),this._v(" выполняется при запуске драйвера. В данном примере, она создает объект "),s("code",[this._v("fiber_object")]),this._v(" из функции "),s("code",[this._v("main")]),this._v(".")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fiber_object "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("В функции "),s("code",[this._v("main()")]),this._v(" реализуется основная логика работы драйвера (опрос источников данных, преобразование данных, запись данных на шину)."),s("br"),this._v("\nНазвание функции может быть любым. Количество таких функций тоже.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test driver loop"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      fiber"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Для управления файбером (потоком) используются функции модуля "),s("code",[this._v("fiber")]),this._v(". В данном случае - "),s("code",[this._v("fiber.sleep(600)")]),this._v(" - скрипт будет ждать 600 секунд по окончанию каждой итерации цикла.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция "),s("code",[this._v("destroy()")]),this._v(" выполняется при остановке скрипта."),s("br"),this._v("\nВ ней целесообразно размещать логику, которая выгружает из памяти используемые данные, сохраняет состояние для будущих запусков или предотвращает завершение скрипта до перезагрузки Glue.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fiber_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dead"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n      store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fiber_object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("В коде примера, функция "),s("code",[this._v("destroy()")]),this._v(" завершает файбер, в случае если он уже не завершен или остановлен из-за ошибки.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("В случае, если остановку драйвера требуется отсрочить до перезагрузки Glue(или если нельзя завершить драйвер без перезагрузки системы), функция destroy должна вернуть "),s("code",[this._v("false")]),this._v(".")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("false")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция "),s("code",[this._v("topic_update_callback()")]),this._v(" используется для реакции на изменение значений топиков на шине.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("topic_update_callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test driver callback:"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Топики, изменение которых отслеживается драйвером перечисляются в виде масок в переменной "),s("code",[this._v("masks")]),this._v(".")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[t._v("masks "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/test/1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/test/2"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Т.е. в данном случае, при каждом изменении топиков "),s("code",[this._v("/test/1")]),this._v(" и "),s("code",[this._v("/test/1")]),this._v(" будет выполнена функция, делающая запись в логах с названием и значением топика.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"bus-event-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bus-event-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Bus-event scripts")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Этот тип скриптов выполняется для каждого устройства из группы устройств, определяемых маской, при обновлении их данных на центральной шине."),s("br"),this._v(" "),s("img",{attrs:{src:"images/busEventScriptList.png",alt:"Bus-event scripts",title:"Bus-event scripts"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("В теле скрипта должна присутствовать функция "),s("code",[this._v("event_handler()")]),this._v(", в которую будет передано значение измененного топика, адрес и время изменения этого топика:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("event_handler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('--\x3e "5 /test/device 1542652525"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Также, в теле скрипта можно создать функции "),s("code",[this._v("init()")]),this._v(" и "),s("code",[this._v("destroy()")]),this._v(", которые будут вызваны при инициализации скрипта и его выгрузке соответственно."),s("br"),this._v("\nЭто может быть полезно, например, если нужно сделать экспорт множества топиков по маске в MQTT.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("У Bus-event скриптов существует возможность однократного запуска нажатием кнопки "),e("strong",[t._v('"Run Once"')]),t._v(" на странице редактиования скрипта или на странице со списком скриптов."),e("br"),t._v("\nПри однократном запуске, принудительно запускается "),e("code",[t._v("event_handler()")]),t._v(" c аргументами "),e("code",[t._v("value=0")]),t._v(", "),e("code",[t._v('topic="once"')]),t._v(". Не выполняются "),e("code",[t._v("init()")]),t._v(" и "),e("code",[t._v("destroy()")]),t._v(".\nОднократный запуск полезен для отладки и совершения разовых действий.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"web-event-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-event-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Web-event scripts")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/webScriptsList.png",alt:"Web-event scripts",title:"Web-event scripts"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Функция, реализующая непосредственную логику при обработке запроса — "),s("code",[this._v("http_callback()")]),this._v(".")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("При создании web-event скрипта, необходимо дать ему название и указать endpoint."),e("br"),t._v("\nПолный адрес скрипта формируется как "),e("code",[t._v("адрес_сервера:порт")]),t._v(" + "),e("code",[t._v("/we/")]),t._v(" + "),e("code",[t._v("endpoint")]),t._v(' и отображается в нижней части модального окна как "Full script URL".')])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/createWebEventScript.png",alt:"Создание web-event скрипта",title:"Создание web-event скрипта"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("code",[this._v("params")]),this._v(" - массив с параметрами запроса")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("http_callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"timer-event-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#timer-event-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Timer-event scripts")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/createTimerEventScript.png",alt:"Timer-event script",title:"Timer-event script"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Код скрипта должен находиться внутри функции "),s("code",[this._v("event_handler()")]),this._v(".")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("event_handler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Timer event start"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"schedule-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#schedule-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Schedule scripts")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/scheduleScript.png",alt:"Schedule script",title:"Schedule script"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("┌───────────── секунды (0 - 59)\n│ ┌───────────── минуты (0 - 59)\n│ │ ┌───────────── часы (0 - 23)\n│ │ │ ┌───────────── дни месяца (1 - 31)\n│ │ │ │ ┌───────────── месяца (JAN-DEC или 1 - 12)\n│ │ │ │ │ ┌───────────── день недели (SUN-SAT или 0 - 6) (с воскресения до субботы)\n│ │ │ │ │ │\n│ │ │ │ │ │\n* * * * * *\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v(" 15 45 13 * * 4\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Код скрипта должен находиться внутри функции "),s("code",[this._v("event_handler()")]),this._v(".")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-lua extra-class"},[e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("event_handler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Shedule event start"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])])}],!1,null,null,null);s.default=n.exports}}]);