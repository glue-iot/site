(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{169:function(t,s,e){"use strict";e.r(s);var a=e(0),r=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("p",[t._v("Тестирование работоспособности модулей Glue, на данном этапе, сводится к тестированию API путем отправки на endpoint'ы HTTP запросов и анализу изменения состояния системы после них.")]),t._v(" "),t._m(2),t._v(" "),e("p",[t._v("Для тестирования используется фреймворк "),e("a",{attrs:{href:"https://olivinelabs.com/busted/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Busted"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("Для запуска тестов, необходимо установить сам Busted и некоторые зависимости.")]),t._v(" "),e("p",[t._v("Последовательность установки:")]),t._v(" "),t._m(3),t._m(4),t._v(" "),e("p",[t._v("Для запуска тестов, перейдите в папку ./tests в корневой директории Glue и выполните:")]),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),e("p",[t._v("В результате запуска теста, в консоли вы увидите примерно такой вывод:")]),t._v(" "),t._m(10),e("p",[t._v("Под ним будет вывод информации о провалившихся тестах.")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"инструменты-тестирования"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#инструменты-тестирования","aria-hidden":"true"}},[this._v("#")]),this._v(" Инструменты тестирования")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"общая-информация"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#общая-информация","aria-hidden":"true"}},[this._v("#")]),this._v(" Общая информация")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"установка-и-настройка"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#установка-и-настройка","aria-hidden":"true"}},[this._v("#")]),this._v(" Установка и настройка")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" luarocks "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#(или brew install luarocks на MacOS)")]),t._v("\nluarocks "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" busted\nluarocks "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" lbase64\nluarocks "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" fun\nluarocks "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" md5\nluarocks "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" luajson\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"запуск-тестов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#запуск-тестов","aria-hidden":"true"}},[this._v("#")]),this._v(" Запуск тестов")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("bash")]),this._v(" run_tests.sh\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Этот скрипт создает папку для логов Tarantool'а ("),s("code",[this._v("./tests/logs/")]),this._v("), запускает тесты и удаляет тестовую базу данных ("),s("code",[this._v("./test_db")]),this._v(") после прохода всех тестов.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("Файл "),e("code",[t._v("run_tests.sh")]),t._v(" можно отредактировать для того, чтобы запускались только тесты с определенным тегом."),e("br"),t._v("\nДля этого, в нем строку "),e("code",[t._v("busted tests.lua")]),t._v(" нужно заменить на "),e("code",[t._v('busted -t "имя_тега" tests.lua')]),t._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Теги можно создавать в файле "),s("code",[this._v("./tests/.busted")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('    ...\n    tarantool = {\n        tags = "tarantool",\n        verbose = true\n    },\n    backups = {\n        tags = "backups",\n        verbose = true\n    },\n    functions = {\n        tags = "functions",\n        verbose = true\n    },\n    параметр_запуска = {\n        tags = "название_тега",\n        verbose = true \n    }\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("bash run_tests.sh \n●●●●●●●●●●●●◼●●●●●●●●●●●●●●●●◼●●●\n31 successes / 2 failures / 0 errors / 0 pending : 14.10226 seconds\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"тест-кейсы"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#тест-кейсы","aria-hidden":"true"}},[this._v("#")]),this._v(" Тест - кейсы")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"tarantool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tarantool","aria-hidden":"true"}},[this._v("#")]),this._v(" Tarantool")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v('Тег "tarantool"')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Запуск Tarantool")]),this._v(" "),s("li",[this._v("Выключение Tarantool")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"скрипты"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#скрипты","aria-hidden":"true"}},[this._v("#")]),this._v(" Скрипты")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v('Тег "script"')])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("создание скрипта")]),t._v(" "),e("li",[t._v("изменение имени(учитывая символы в именах, вроде +/_-%),")]),t._v(" "),e("li",[t._v("изменение объекта")]),t._v(" "),e("li",[t._v("изменение тела")]),t._v(" "),e("li",[t._v("копирование скрипта")]),t._v(" "),e("li",[t._v("получение информации о скрипте")]),t._v(" "),e("li",[t._v("удаление запущенного скрипта")]),t._v(" "),e("li",[t._v("удаление остановленного скрипта")]),t._v(" "),e("li",[t._v("удаление скрипта, в котором destroy возвращает false")]),t._v(" "),e("li",[t._v("cоздание невалидного скрипта, запуск, получение ошибки")]),t._v(" "),e("li",[t._v("создание валидного скрипта, запуск, получение подтверждения запуска")]),t._v(" "),e("li",[t._v("cоздание скрипта, изменяющего bus, запуск, проверка изменения bus")]),t._v(" "),e("li",[t._v("cоздание скрипта, создающего записи в логах, запуск, проверка логов")]),t._v(" "),e("li",[t._v("cоздание скрипта, подписанного на события, генерация события, проверка реакции скрипта")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"шина"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#шина","aria-hidden":"true"}},[this._v("#")]),this._v(" Шина")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v('Тег "bus"')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("создание записи")]),this._v(" "),s("li",[this._v("изменение метаданных")]),this._v(" "),s("li",[this._v("изменение значения")]),this._v(" "),s("li",[this._v("удаление записи")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"логи"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#логи","aria-hidden":"true"}},[this._v("#")]),this._v(" Логи")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v('Тег "logs"')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("создание записей в логах разных уровней")]),this._v(" "),s("li",[this._v("получение записей с сортировкой по level(проверка фильтрации)")]),this._v(" "),s("li",[this._v("очистка логов")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"резервное-копирование"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#резервное-копирование","aria-hidden":"true"}},[this._v("#")]),this._v(" Резервное копирование")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v('Тег "backups"')])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("наполнение данными базы")]),t._v(" "),e("li",[t._v("проверка создания копии")]),t._v(" "),e("li",[t._v("проверка восстановления копии")]),t._v(" "),e("li",[t._v("проверка, что в копию попадают скрипты и bus")]),t._v(" "),e("li",[t._v("проверка, что в копию не попадают логи")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"встроенные-функции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#встроенные-функции","aria-hidden":"true"}},[this._v("#")]),this._v(" Встроенные функции")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v('Тег "functions"')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("создание скрипта с функциями "),s("code",[this._v("round()")]),this._v(", "),s("code",[this._v("deepcopy()")]),this._v(", проверка правильности работы этих функций")]),this._v(" "),s("li",[this._v("создание записи в bus в случае успеха, проверка наличия записи.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"прочая-информация"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#прочая-информация","aria-hidden":"true"}},[this._v("#")]),this._v(" Прочая информация")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Тестовые скрипты, которые используются для создания ситуаций для тестов располагаются в папке "),s("code",[this._v("./tests/test_scripts")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Логи Tarantool пишутся в папку "),s("code",[this._v("./tests/logs")]),this._v(". Название файла с логами содержит дату и случайную строку.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Тестовый процесс Tarantool запускается на 8888 порту и работает с тестовой базой ("),s("code",[this._v("./test_db")]),this._v(")."),s("br"),this._v("\nФункционированию рабочей версии Glue это никак не мешает.")])}],!1,null,null,null);s.default=r.exports}}]);